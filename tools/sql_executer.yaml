identity:
  name: sql_executer
  author: joto
  label:
    en_US: SQL Executer
    zh_Hans: SQL执行器
 
description:
  human:
    en_US: Execute SQL queries and get results from the database.
    zh_Hans: 执行SQL查询并从数据库获取结果。
  llm: A tool that executes SQL queries against the configured database and returns the results in either JSON or Markdown format.

parameters:
  - name: sql
    type: string
    required: true
    label:
      en_US: SQL Query
      zh_Hans: SQL查询
    human_description:
      en_US: The SQL query to execute.
      zh_Hans: 要执行的SQL查询语句。
    llm_description: The raw SQL query to be executed on the database.
    form: llm

  - name: output_format
    type: select
    required: true
    label:
      en_US: Output Format
      zh_Hans: 输出格式
    human_description:
      en_US: The format for the output results.
      zh_Hans: 输出结果的格式。
    llm_description: The desired format for the query results, either 'json' or 'md'.
    form: form
    options:
      - value: json
        label:
          en_US: JSON
          zh_Hans: JSON
      - value: md
        label:
          en_US: Markdown
          zh_Hans: Markdown
    default: json
  - name: max_line
    type: number
    required: false
    label:
      en_US: Max Line
      zh_Hans: 最大行数
    human_description:
      en_US: The maximum number of lines to return.
      zh_Hans: 要返回的最大行数。防止查询数据过多导致内存问题。
    llm_description: The maximum number of lines to include in the query results.
    form: llm

  - name: db_type
    type: select
    required: false
    label:
      en_US: Database Type (Optional)
      zh_Hans: 数据库类型（可选）
      pt_BR: Database Type (Optional)
    human_description:
      en_US: Override database type. If not provided, uses provider configuration.
      zh_Hans: 覆盖数据库类型。如果未提供，则使用提供商配置。
      pt_BR: Override database type. If not provided, uses provider configuration.
    llm_description: Database type to connect to. Falls back to provider configuration if not specified.
    form: form
    options:
      - value: mysql
        label:
          en_US: MySQL
          zh_Hans: MySQL
          pt_BR: MySQL
      - value: postgresql
        label:
          en_US: PostgreSQL
          zh_Hans: PostgreSQL
          pt_BR: PostgreSQL
      - value: mssql
        label:
          en_US: Microsoft SQL Server
          zh_Hans: Microsoft SQL Server
          pt_BR: Microsoft SQL Server
      - value: oracle
        label:
          en_US: Oracle
          zh_Hans: Oracle
          pt_BR: Oracle
      - value: dameng
        label:
          en_US: Dameng
          zh_Hans: 达梦数据库
          pt_BR: Dameng
      - value: doris
        label:
          en_US: Apache Doris
          zh_Hans: Apache Doris
          pt_BR: Apache Doris

  - name: db_host
    type: string
    required: false
    label:
      en_US: Database Host (Optional)
      zh_Hans: 数据库主机（可选）
      pt_BR: Database Host (Optional)
    human_description:
      en_US: Override database host. If not provided, uses provider configuration.
      zh_Hans: 覆盖数据库主机。如果未提供，则使用提供商配置。
      pt_BR: Override database host. If not provided, uses provider configuration.
    llm_description: Database host address. Falls back to provider configuration if not specified.
    form: form

  - name: db_port
    type: string
    required: false
    label:
      en_US: Database Port (Optional)
      zh_Hans: 数据库端口（可选）
      pt_BR: Database Port (Optional)
    human_description:
      en_US: Override database port. If not provided, uses provider configuration.
      zh_Hans: 覆盖数据库端口。如果未提供，则使用提供商配置。
      pt_BR: Override database port. If not provided, uses provider configuration.
    llm_description: Database port number. Falls back to provider configuration if not specified.
    form: form

  - name: db_user
    type: string
    required: false
    label:
      en_US: Database User (Optional)
      zh_Hans: 数据库用户名（可选）
      pt_BR: Database User (Optional)
    human_description:
      en_US: Override database username. If not provided, uses provider configuration.
      zh_Hans: 覆盖数据库用户名。如果未提供，则使用提供商配置。
      pt_BR: Override database username. If not provided, uses provider configuration.
    llm_description: Database username. Falls back to provider configuration if not specified.
    form: form

  - name: db_password
    type: string
    required: false
    label:
      en_US: Database Password (Optional)
      zh_Hans: 数据库密码（可选）
      pt_BR: Database Password (Optional)
    human_description:
      en_US: Override database password. If not provided, uses provider configuration.
      zh_Hans: 覆盖数据库密码。如果未提供，则使用提供商配置。
      pt_BR: Override database password. If not provided, uses provider configuration.
    llm_description: Database password. Falls back to provider configuration if not specified.
    form: form

  - name: db_name
    type: string
    required: false
    label:
      en_US: Database Name (Optional)
      zh_Hans: 数据库名称（可选）
      pt_BR: Database Name (Optional)
    human_description:
      en_US: Override database name. If not provided, uses provider configuration.
      zh_Hans: 覆盖数据库名称。如果未提供，则使用提供商配置。
      pt_BR: Override database name. If not provided, uses provider configuration.
    llm_description: Database name to connect to. Falls back to provider configuration if not specified.
    form: form

extra:
  python:
    source: tools/sql_executer.py
